# 1장 새로운 인프라 환경이 온다

### 컨테이너

컨테이너는 하나의 운영체제 커널에서 다른 프로세스에 영향을 받지 않고 독립적으로 실행되는 프로세스 상태를 의미한다. 구현된 컨테이너는 가상화 상태에서 동작하는 프로세스보다 가볍고 빠르게 동작한다. 

### 마이크로서비스 아키텍처

개별 기능을 하는 작은 서비스를 각각 개발해 연결한다. 이런 구조는 개발된 서비스를 재사용하기 쉽고, 향수 서비스가 변경됐을 때 다른 서비스에 영향을 미칠 가능성이 줄어들며 사용량의 변화에 따라 특정 서비스만 확장할 수 있다. 모놀로식보다 복잡도가 높으며 각 서비스가 서로 유기적으로 통신하는 구조로 설계되어 있어 네트워크를 통한 호출 횟수가 증가해 성능에 영향을 줄 수 있다.

각 서비스는 API 게이트웨이와 REST API를 이용한 통신 방식으로 사용자의 요청을 전달한다. 서비스 개수는 고정된 것이 아니라 서비스 파악을 위해 서비스 디스커버리를 사용한다. 수많은 서비스의 내부 통신을 이벤트로 일원화하고 효과적으로 관리하기 위해 별도로 이벤트 버스를 서비스로 구성한다.

이런 구조로 각 서비스는 필요한 기능이 특화된 데이터베이스를 선택해 개별 서비스에 할당할 수 있다. 고객의 요구사항에 따라 서비스를 추가해야 할 때도 이벤트 버스에 바로 연결하면 되므로 매우 유연하게 대응이 가능하다. 각 서비스는 독립적으로 동작해 완결된 구조라서 이미 개발된 기능이 다른 서비스에 필요하면 바로 재사용할 수 있다.

### 컨테이너 인프라 환경을 지원하는 도구

컨테이너 인프라 환경은 크게 컨테이너, 컨테이너 관리, 개발환경 구성 및 배포 자동화, 모니터링으로 구성된다. 

1. 도커
    1. 컨테이너를 만들과 관리하는 것을 도와주는 컨테이너 도구
    2. 그 외에 컨테이너디, 크라이오, 파드맨 등이 있으나 도커를 가장 많이 사용
2. 쿠버네티스
    1. 다수의 컨테이너를 관리하는데 사용 - 컨테이너의 자동 배포와 배포된 컨테이너에 대한 동작 보증, 부하에 따른 동적 확장 등의 기능을 제공
    2. 컨테이너 인프라를 기반으로 API 게이트웨이, 서비스 디스커버리, 이벤트 버스, 인증 및 결제 등의 다양한 서비스를 효율적을 관리할 수 있는 환경을 제공하고 이를 내외부와 유연하게 연결해 준다. 
3. 젠킨스
    1. 지속적 통함(CI)와 지속적 배포(CD)를 지원함 - 개발한 프로그램의 빌드, 테스트, 패키지화, 배포 단계를 모두 자동화해 개발 단계를 표준화한다.
    2. 개발된 코드의 빠른 적응과 효과적인 관리를 통해 개발 생산성을 높이는데 초점이 맞춰져 있다.
    3. 그 이 깃허브 액션, 뱀부, 팀시티 등이 있음
4. 프로메테우스와 그라파나
    1. 둘 다 모니터링을 위한 도구
    2. 프로메테우스는 상태 데이터를 수집하고 그라파나는 프로메테우스로 수집한 데이터를 관리자가 보기 좋게 시각화한다. 
    3. 프로메테우스와 그라파나는 패키징돼 동작하며 최소한의 자원으로 쿠버네티스 클러스터의 상태를 시각적으로 표현한다.
    4. 모니터링 데이터 수집 도구로 그 외에 데이터독, 인플럭스DB, 뉴 렐릭 등이 있다.
    5. 데이터 시각화 도구로 그 외에 키바나, 크로노그래프 등이 있다.